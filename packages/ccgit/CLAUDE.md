# ccgit - Claude Chat Git Integration

Claude CLIã®å®Ÿè¡Œã¨åŒæ™‚ã«Gitã§ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã‚’è‡ªå‹•ç®¡ç†ã™ã‚‹ãƒ„ãƒ¼ãƒ«

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ccgit (Deno) â”‚â”€â”€â–¶â”‚  Claude   â”‚â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   CLI    â”‚   â”‚
        â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚stdout / stderr
        â”‚env / argv                  â–¼
        â–¼                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  Parser &    â”‚
â”‚ pre-/post hooks     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  Metadata    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  Extractor   â”‚
        â”‚ git add -A / commit   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â–¼                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â–¼
â”‚ Git repo (ã‚³ãƒ¼ãƒ‰+log)â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€git commit
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### 1. ccgit CLIãƒ©ãƒƒãƒ‘ãƒ¼ (main.ts)
- Claude CLIã®ã™ã¹ã¦ã®ã‚³ãƒãƒ³ãƒ‰ã‚’é€éçš„ã«ãƒ©ãƒƒãƒ—
- å®Ÿè¡Œå‰: ç¾åœ¨ã®å¤‰æ›´ã‚’stashã¾ãŸã¯commit
- å®Ÿè¡Œå¾Œ: git add -A â†’ commit ã§ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’è¨˜éŒ²
- --resumeã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚‚ãã®ã¾ã¾é€é

### 2. ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æŠ½å‡ºå™¨ (metadata.ts)
- Claude CLIã®æ¨™æº–å‡ºåŠ›ã‹ã‚‰ã‚»ãƒƒã‚·ãƒ§ãƒ³IDã‚’æŠ½å‡º
- ä¾‹: "claude --resume abc123" ã®ã‚ˆã†ãªãƒ­ã‚°ã‹ã‚‰ "abc123" ã‚’å–å¾—
- ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå†…å®¹ã‚‚è¨˜éŒ²

### 3. Gitè‡ªå‹•åŒ–ã‚¨ãƒ³ã‚¸ãƒ³ (git.ts)
- ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ:
  ```
  feat: <è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸã‚¿ã‚¤ãƒˆãƒ«>
  
  Session-ID: abc123
  Prompt: "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ â€¦"
  Time: 2025-06-20T17:12:52+09:00
  ```
- ã‚³ãƒŸãƒƒãƒˆã‚¿ã‚¤ãƒˆãƒ«ã¯ä»¥ä¸‹ã®æ–¹æ³•ã§è‡ªå‹•ç”Ÿæˆ:
  - gclmã®ã‚³ãƒ¼ãƒ‰ã‚’ä¸€éƒ¨æµç”¨ï¼ˆã‚³ãƒ”ãƒ¼ï¼†æ”¹ä¿®ï¼‰
    - generateCommitTitleé–¢æ•°ã¨ãã®ä¾å­˜é–¢ä¿‚ã‚’æŠ½å‡º
    - ccgitç”¨ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæƒ…å ±ã‚‚è€ƒæ…®ï¼‰
  - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: "feat: Claude chat session"
- git trailerså½¢å¼ã§å¾Œã‹ã‚‰æ¤œç´¢å¯èƒ½

### 4. å±¥æ­´ç®¡ç†æ©Ÿèƒ½ (history.ts)
- `ccgit checkout abc123`: ã‚»ãƒƒã‚·ãƒ§ãƒ³IDã§ãƒªãƒã‚¸ãƒˆãƒªã‚’å¾©å…ƒ
- `ccgit start foo`: ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ¥ãƒ–ãƒ©ãƒ³ãƒä½œæˆ (claude/foo-<timestamp>)
- `--squash`: ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†æ™‚ã«å±¥æ­´ã‚’ã¾ã¨ã‚ã‚‹

## å®Ÿè£…çŠ¶æ³

### âœ… å®Ÿè£…æ¸ˆã¿
- ccgit ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡ºåŠ›ç›£è¦–ã¨ã‚¿ã‚¹ã‚¯å®Œäº†æ¤œçŸ¥
- è‡ªå‹•commitï¼ˆå„ã‚¿ã‚¹ã‚¯å®Œäº†æ™‚ï¼‰
- ã‚»ãƒƒã‚·ãƒ§ãƒ³IDæŠ½å‡ºã¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿åŸ‹ã‚è¾¼ã¿
- ccgit checkoutï¼ˆå±¥æ­´å¾©å…ƒï¼‰
- ccgit startï¼ˆãƒ–ãƒ©ãƒ³ãƒç®¡ç†ï¼‰
- ccgit listï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸€è¦§è¡¨ç¤ºï¼‰

### ğŸ”„ TODO
- --squashã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†æ™‚ã®å±¥æ­´é›†ç´„ï¼‰ã‚’å®Ÿè£…
- è©³ç´°ãªãƒ†ã‚¹ãƒˆã‚’è¿½åŠ   
- è©³ç´°ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ 

## ä½¿ç”¨ä¾‹

```bash
#ï¼ˆClaude CLIã¨åŒã˜ã€å¯¾è©±ãƒ¢ãƒ¼ãƒ‰ã«ãªã‚‹ï¼‰
ccgit
ccgit "TypeScriptã®å‹ã‚¨ãƒ©ãƒ¼ã‚’ä¿®æ­£ã—ã¦"

# ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å†é–‹ï¼ˆ--resumeã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’é€éï¼‰
ccgit --resume abc123

# éå»ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«æˆ»ã‚‹ï¼ˆccgitç‹¬è‡ªã‚³ãƒãƒ³ãƒ‰ï¼‰
ccgit checkout abc123

# ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ¥ãƒ–ãƒ©ãƒ³ãƒã§ä½œæ¥­ï¼ˆccgitç‹¬è‡ªã‚³ãƒãƒ³ãƒ‰ï¼‰
ccgit start feature-auth
```

## å‹•ä½œãƒ¢ãƒ¼ãƒ‰

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆ
- `ccgit` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€Claude CLIã®å‡ºåŠ›ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ç›£è¦–
- Claude CodeãŒã‚¿ã‚¹ã‚¯ã‚’å®Œäº†ã™ã‚‹ãŸã³ã«**å³åº§ã«è‡ªå‹•commit**
- ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ã€ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã€ãƒ“ãƒ«ãƒ‰å®Œäº†ãªã©ã‚’æ¤œçŸ¥ã—ã¦commit
- å„commitã«ã¯ä¸€æ„ã®task-IDãŒä»˜ä¸ã•ã‚Œã‚‹

### å®Ÿè¡Œãƒ•ãƒ­ãƒ¼
1. `ccgit` å®Ÿè¡Œ
2. ç¾åœ¨ã®å¤‰æ›´ã‚’stashï¼ˆã¾ãŸã¯åˆå›commitï¼‰
3. Claude CLIèµ·å‹•ï¼ˆ`claude` ã‚³ãƒãƒ³ãƒ‰ï¼‰
4. å¯¾è©±ãƒ¢ãƒ¼ãƒ‰é–‹å§‹
5. **ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ› â†’ Claudeå¿œç­” â†’ ã‚¿ã‚¹ã‚¯å®Œäº†æ¤œçŸ¥ â†’ å³åº§ã«commit**ï¼ˆç¹°ã‚Šè¿”ã—ï¼‰
6. çµ‚äº†æ™‚ã«æœ€çµ‚commitï¼ˆæœªã‚³ãƒŸãƒƒãƒˆã®å¤‰æ›´ãŒã‚ã‚Œã°ï¼‰

### è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆã®æ¤œçŸ¥ãƒ‘ã‚¿ãƒ¼ãƒ³
- "The file ... has been updated"
- "File created successfully"  
- "âœ…" ï¼ˆæˆåŠŸã‚’ç¤ºã™çµµæ–‡å­—ï¼‰
- "Command completed successfully"
- "Test passed"
- "Build successful"
- "Successfully" ã‚’å«ã‚€å‡ºåŠ›

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
packages/ccgit/
â”œâ”€â”€ main.ts          # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ git.ts           # Gitæ“ä½œãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”œâ”€â”€ metadata.ts      # ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æŠ½å‡º
â”œâ”€â”€ history.ts       # å±¥æ­´ç®¡ç†
â”œâ”€â”€ types.ts         # å‹å®šç¾©
â”œâ”€â”€ CLAUDE.md        # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â””â”€â”€ deno.json        # è¨­å®š
```

## å®Ÿè£…ãƒ¡ãƒ¢

- Denoã®subprocess APIã‚’ä½¿ç”¨ã—ã¦Claude CLIã‚’å®Ÿè¡Œ
- æ¨™æº–å‡ºåŠ›/ã‚¨ãƒ©ãƒ¼å‡ºåŠ›ã‚’ãƒ‘ã‚¤ãƒ—ã—ã¦è§£æ
- gitæ“ä½œã¯ `jsr:@david/dax` ã‚’ä½¿ç”¨
- ã‚»ãƒƒã‚·ãƒ§ãƒ³IDã¯ä¸€æ„æ€§ã‚’ä¿ã¤ãŸã‚UUID v4å½¢å¼ã‚’æƒ³å®š

## æŠ±ãˆã¦ã„ã‚‹ä¸å…·åˆ
### ccgit checkoutã§ããªã„
ãƒ­ã‚°ï¼š
$ deno task ccgit list                                                                                       19:00
Task ccgit deno task --filter "@deno-cli/ccgit" run "list"
Task run deno run --allow-net --allow-env --allow-read --allow-run main.ts "list"
Recent Claude sessions:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ef2a111 mc4lde59-xk6j5       6/20/2025, 6:12:39 PM
0cf5396 mc4n18yf-im36n       6/20/2025, 6:59:12 PM

ãƒ­ã‚°ï¼š
$ deno task ccgit checkout 0cf5396                                                                           18:59
Task ccgit deno task --filter "@deno-cli/ccgit" run "checkout" "0cf5396"
Task run deno run --allow-net --allow-env --allow-read --allow-run main.ts "checkout" "0cf5396"
âŒ No commits found for session ID: 0cf5396

æœŸå¾…ã™ã‚‹æŒ™å‹•
ccgit checkoutã§ãã‚‹
### ccgit --dangerously-skip-permissionsã§ããªã„
ãƒ­ã‚°ï¼š
$ deno task ccgit --dangerously-skip-permissions                                                             18:59
Task ccgit deno task --filter "@deno-cli/ccgit" run "--dangerously-skip-permissions"
Task run deno run --allow-net --allow-env --allow-read --allow-run main.ts "--dangerously-skip-permissions"
ğŸš€ Starting Claude session with auto-commit...
ğŸ¯ Interactive mode with auto-commit enabled
Error: Input must be provided either through stdin or as a prompt argument when using --print

æœŸå¾…ã™ã‚‹æŒ™å‹•
ccgit --dangerously-skip-permissionsã§ãã‚‹

## commit titleãŒAIã«æ›¸ã„ã¦ã‚‚ã‚‰ãˆã¦ãªã„
æœŸå¾…ã™ã‚‹æŒ™å‹•
commit titleãŒAIã«æ›¸ã„ã¦ã‚‚ã‚‰ã†